# MySQL索引

## 1. 概述

索引的作用是为了加快数据库的查询。索引依托于存储引擎的实现，不同的存储引擎的索引不一定完全相同，并且每种存储引擎也不一定支持所有的索引类型。

MySQL中的索引存储类型有两种，BTREE和HASH，具体和表的存储引擎相关。

例如，MyISAM和InnoDB存储引擎只支持BTREE索引，MEMORY和HEAP存储引擎可以支持HASH和BTREE索引。

### 1.1 索引的优点

- 加快数据的查询速度
- 唯一索引可以保证列的唯一性 
- 可以加速表与表之间的连接速度

### 1.2 索引的缺点

- 占用磁盘空间，如果一张表中存在大量的索引，有可能索引文件的数据比数据文件更快的达到最大文件尺寸
- 虽然加快了查询的速度，但是同时也会增加增删改的性能损耗，因为每次对数据行的操作，都会导致索引的维护

## 2. 索引的分类

### 2.1 主键索引

1. 主键索引具有唯一性；也可以来理解为一种特殊的唯一索引；
2. 在数据表中设置某一个字段为primary key 的时候，该列将自动建立主键索引；

### 2.2 唯一索引

1. 当数据表中的字段被设置为unique时，该列将自动创建唯一索引。需要注意的是，必须保证该列的值绝对不会重复
2. 唯一索引可以为空

### 2.3 全文索引

1. 全文索引只有在MyISAM引擎中并且是char varchar text 类型的字段上使用。

### 2.4 普通索引

MySQL中基本的索引类型

### 2.5 组合索引



## 3. 索引的操作

### 3.1 创建索引

#### 3.1.1 创建主键索引 

通常来说，主键索引有两种创建方式。

1. 在创建表的时候指定 primary key

   ```
   create table user (
   	id bigint(20) primary key, -- 指定列 id 为 user 表的主键
   	...
   )
   ```

2. 如果在创建表的时候没有指定主键索引，也可以手动创建：

   ```sql
   alert table tableName add primary key (主键字段名);
   ```

#### 3.1.2 创建普通索引

1. 在创建表的时候指定列

   ```sql
   create table user (
       id bigint primary key,
       name varchar(20),
       index(name)
   );
   ```

2. 直接创建索引

   ```sql
   -- 语法: create index 索引名 on 表名 (字段名);
   create index key_name on user (name,...);
   ```

### 3.1.3 创建唯一索引

1. 在创建表的时候指定列

   ```sql
   create table user (
       id bigint primary key,
       name varchar(20) unique
   );
   ```

2. 直接创建唯一索引

   ```sql
   -- 语法: create unique index 索引名 on 表名 (字段名);
   create index key_name on user (name,...);
   ```

### 3.1.4 创建组合索引

​		

### 4. 索引的原理

假设一张表没有建立索引，MySQL在查询时，必须从表的第一条记录开始检索每一行数据，也就是我们通常所说的全表扫描，相反，如果表中创建了索引，并且在查询时使用到了索引，就能够避免全表扫描，从而提高MySQL的查询性能。

MySQL在数据表创建索引时会同时创建索引文件。























